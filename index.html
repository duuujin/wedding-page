<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²½ëª¨ ê²°í˜¼ ì¶•í•˜ í˜ì´ì§€</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- ì»¤ìŠ¤í…€ CSS -->
    <link rel="stylesheet" href="css/style.css">
    <style>
    </style>
</head>

<body>


    <!-- <div class="music-control  top-0 end-0 m-3">
        <button id="music-btn" class="btn btn-sm btn-outline-secondary">BGM ğŸ”Š</button>
    </div> -->

    <!-- ë°°ê²½ ìŒì•… (í•œ ë²ˆë§Œ ì¬ìƒ) -->
    <audio id="bg-music" src="music/wedding-song.mp3" autoplay loop preload="auto" playsinline></audio>

    <!-- í˜ì´ì§€ íƒ€ì´í‹€ -->
    <div class="flip-container">
        <section class="hero-section text-center py-3">
            <h1>ğŸ‰ ê²°í˜¼ ì¶•í•˜í•œë‹¤! ğŸ‰</h1>
            <p>ì´ˆë¼í•˜ì§€ë§Œ, ì´ê±° ë³´ë©´ì„œ ì˜› ìƒê° ë– ì˜¬ë ¤ë´!</p>
        </section>

        <!-- ì‚¬ì§„ ìŠ¬ë¼ì´ë“œ -->
        <section id="carousel-section" class="container py-3">
            <div id="weddingCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">

                    <!-- ì¹´ë“œ 1 -->
                    <div class="carousel-item active">
                        <div class="card">
                            <img src="images/main1.jpg" class="card-img-top" alt="ì‚¬ì§„ 1" data-bs-toggle="modal"
                                data-bs-target="#modal1">
                            <div class="card-body">
                                <p class="card-text text-center">ë§Œë‚¨ì˜ ì„¤ë ˜</p>
                            </div>
                        </div>
                    </div>

                    <!-- ì¹´ë“œ 2 -->
                    <div class="carousel-item">
                        <div class="card">
                            <img src="images/main2.jpg" class="card-img-top" alt="ì‚¬ì§„ 2" data-bs-toggle="modal"
                                data-bs-target="#modal2">
                            <div class="card-body">
                                <p class="card-text text-center">í•¨ê»˜í•œ ì—¬í–‰</p>
                            </div>
                        </div>
                    </div>

                    <!-- ì¹´ë“œ 3 -->
                    <div class="carousel-item">
                        <div class="card">
                            <img src="images/main3.jpg" class="card-img-top" alt="ì‚¬ì§„ 3" data-bs-toggle="modal"
                                data-bs-target="#modal3">
                            <div class="card-body">
                                <p class="card-text text-center">ì¶”ì–µì˜ ë°ì´íŠ¸</p>
                            </div>
                        </div>
                    </div>

                    <!-- ì¹´ë“œ 4 -->
                    <div class="carousel-item">
                        <div class="card">
                            <img src="images/main4.jpg" class="card-img-top" alt="ì‚¬ì§„ 4" data-bs-toggle="modal"
                                data-bs-target="#modal4">
                            <div class="card-body">
                                <p class="card-text text-center">ì¦ê±°ìš´ ìˆœê°„</p>
                            </div>
                        </div>
                    </div>

                    <!-- ì¹´ë“œ 5 -->
                    <div class="carousel-item">
                        <div class="card">
                            <img src="images/main5.jpg" class="card-img-top" alt="ì‚¬ì§„ 5" data-bs-toggle="modal"
                                data-bs-target="#modal5">
                            <div class="card-body">
                                <p class="card-text text-center">ì‹œí¬í•œ í‘œì •</p>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- í™”ì‚´í‘œ -->
                <button class="carousel-control-prev" type="button" data-bs-target="#weddingCarousel"
                    data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#weddingCarousel"
                    data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                </button>
            </div>
        </section>

        <!-- ì „í•˜ê³  ì‹¶ì€ ë§ í˜ì´ì§€ ë„˜ì–´ê°€ê¸° -->
    </div> <!-- .flip-container ë‹«ìŒ -->

    <!-- ì¶”ì–µì•¨ë²” ì„¹ì…˜ -->
    <section class="message-section text-center py-5">
        <h3>í–‰ë³µí•œ ê²°í˜¼ìƒí™œì„ ì‘ì›í• ê²Œ!</h3>
        <p>ì‚¬ë‘ê³¼ ì›ƒìŒì´ ê°€ë“í•œ ê°€ì •ì´ ë˜ê¸¸ ë°”ë„ê²Œ!</p>
        <!-- ì•¨ë²” í˜ì´ì§€ ì´ë™ ë²„íŠ¼ -> SPAìš© ìŠ¤í¬ë¡¤ ë²„íŠ¼ -->
        <button id="open-album" class="btn btn-outline-secondary mt-3">ì¶”ì–µ ì•¨ë²” ë³´ê¸°</button>
    </section>

    <!-- ë©”ì‹œì§€ ì„¹ì…˜ -->
    <section class="message-section text-center py-3">
        <h3>ì‹ í˜¼ë¶€ë¶€ì—ê²Œ ì „í•˜ëŠ” ë§</h3>
        <p>ì •ë§ ì´ˆë¼í•˜ê²Œ ì‘ì„±í•œê±°ì§€ë§Œ, ì¶•í•˜ì˜ ë©”ì„¸ì§€</p>
        <!-- ì•¨ë²” í˜ì´ì§€ ì´ë™ ë²„íŠ¼ -> SPAìš© ìŠ¤í¬ë¡¤ ë²„íŠ¼ -->
        <button id="open-message" class="btn btn-outline-secondary mt-4"
            style="box-shadow: 0 8px 18px rgba(90,132,170,.25);">ë©”ì„¸ì§€ ë³´ê¸°</button>
    </section>


    <!-- ë©”ì‹œì§€ ì „ìš© í˜ì´ì§€ (í¸ì§€ ëª©ë¡) -->
    <section id="message-page" class="container py-5 d-none">
        <h2 class="mb-4 text-center">ì‹ í˜¼ë¶€ë¶€ì—ê²Œ ì „í•˜ëŠ” í¸ì§€</h2>
        <div id="letters-row" class="row g-3 mb-4">
            <!-- JSê°€ í¸ì§€ ì¹´ë“œ ìƒì„± -->
        </div>
        <div class="text-center">
            <button id="back-home" class="btn btn-outline-secondary">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>
    </section>

    <!-- ì¶”ì–µ ì•¨ë²” ì„¹ì…˜ (ë™ì  ìƒì„±: ì‚¬ì§„ 2ì¥ì”© í‘œì‹œ) -->
    <!-- ê¸°ë³¸ì ìœ¼ë¡œ í˜ì´ì§€ ë¡œë“œ ì‹œ ë³´ì´ì§€ ì•Šê²Œ í•¨ (ë²„íŠ¼ìœ¼ë¡œ í‘œì‹œ) -->
    <section id="album-section" class="container py-4 d-none">
        <!-- <h2 class="mb-3">ì¶”ì–µ ì•¨ë²”</h2> -->
        <div id="album-row" class="row g-3">
            <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¸ë„¤ì¼ì´ ì—¬ê¸° ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>
        <!-- í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸° ë²„íŠ¼ ì¶”ê°€ -->
        <div class="text-center mt-3">
            <button id="back-home-album" class="btn btn-outline-secondary">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>
    </section>

    <!-- ëª¨ë‹¬ ë¶€ë¶„ (ì‚¬ì§„ í™•ëŒ€) -->
    <!-- ê¸°ì¡´ modal1~modal5 ìœ ì§€ (í•„ìš”ì‹œ ì‚­ì œ ê°€ëŠ¥) -->

    <!-- ì•¨ë²” ê°¤ëŸ¬ë¦¬ ëª¨ë‹¬ (ê³µí†µ) -->
    <div class="modal fade" id="albumModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content bg-transparent border-0 position-relative p-0">
                <button id="album-prev"
                    class="carousel-control-prev position-absolute top-50 start-0 translate-middle-y ms-2" type="button"
                    aria-label="ì´ì „">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                </button>
                <img id="album-modal-img" src="" class="w-100 rounded" alt="ì•¨ë²” ì‚¬ì§„">
                <button id="album-next"
                    class="carousel-control-next position-absolute top-50 end-0 translate-middle-y me-2" type="button"
                    aria-label="ë‹¤ìŒ">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                </button>
            </div>
        </div>
    </div>

    <!-- í¸ì§€ ì½ê¸° ëª¨ë‹¬ -->
    <div class="modal fade" id="letterModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-md">
            <div class="modal-content border-0 bg-transparent">
                <div class="position-relative">
                    <button id="letter-prev"
                        class="carousel-control-prev position-absolute top-50 start-0 translate-middle-y ms-2"
                        type="button" aria-label="ì´ì „">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    </button>
                    <div class="letter-paper mx-3" id="letter-modal-body">
                        <h3 id="letter-title"></h3>
                        <div class="letter-meta" id="letter-meta"></div>
                        <div class="letter-body" id="letter-body"></div>
                    </div>
                    <button id="letter-next"
                        class="carousel-control-next position-absolute top-50 end-0 translate-middle-y me-2"
                        type="button" aria-label="ë‹¤ìŒ">
                        <!-- <span class="carousel-control-next-icon" aria-hidden="true"></span> -->
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ì¸íŠ¸ë¡œ ëª¨ë‹¬: ì²« ë°©ë¬¸ ì‹œ ì½ëŠ” ìˆœì„œ ì•ˆë‚´ -->
    <div class="modal fade" id="introModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">í•œ ë²ˆ ë³´ê³  ê°€ì…”</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
                </div>
                <div class="modal-body">
                    <p>ê³ ëƒ¥ ëŒ€ì¶© ëŒ€ì¶© ë§Œë“¤ì—ˆìœ¼ë‹ˆ ì‹¬ì‹¬í•  ë•Œ ë³´ì…”</p>
                    <ol>
                        <li>ì•Œì•„ì„œ ì˜ ë³´ê±°ë¼ ìƒê°í•œë‹¤</li>
                        <li>ìš”ìƒí•˜ê²Œ ë§Œë“  ì•¨ë²”ìœ¼ë¡œ ì´ë™í•´ì„œ ì˜ ë³´ì…”</li>
                        <li>ì•¨ë²” ë‹¤ ë´¤ìœ¼ë©´ ë©”ì„¸ì§€ ë³´ê¸° ëˆŒëŸ¬ë´</li>
                        <li>ìŒì•…ì´ë‘ í•¨ê»˜ ë³´ì…”</li>
                    </ol>
                    <div class="form-check mt-2">
                        <!-- <input class="form-check-input" type="checkbox" value="" id="intro-no-show"> -->
                        <!-- <label class="form-check-label" for="intro-no-show">ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°</label> -->

                        <button id="enable-bgm" class="btn btn-primary w-100 py-2 mt-2">ë°°ê²½ìŒì•… ì¼œê¸° ğŸ”Š</button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="intro-start" type="button" class="btn btn-primary">ì‹œì‘í•˜ê¸°</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- ì»¤ìŠ¤í…€ JS -->
    <script src="js/script.js"></script>

    <!-- ì¸íŠ¸ë¡œ ëª¨ë‹¬ í‘œì‹œ ìŠ¤í¬ë¦½íŠ¸ (ì²« ë°©ë¬¸ì—ë§Œ í‘œì‹œ) -->
    <script>
        (function () {
            const STORAGE_KEY = 'introSeen_v1';
            const introModalEl = document.getElementById('introModal');
            if (!introModalEl) return;
            const introSeen = localStorage.getItem(STORAGE_KEY);
            const introModal = new bootstrap.Modal(introModalEl);

            // ì²˜ìŒ ë°©ë¬¸ì´ë©´ ëª¨ë‹¬ í‘œì‹œ
            if (!introSeen) {
                // ì•½ê°„ ì§€ì—°ì‹œì¼œ ë¶€íŠ¸ìŠ¤íŠ¸ë© ë¡œë“œ ë° ë Œë”ë§ ì•ˆì •í™”
                setTimeout(() => introModal.show(), 200);
            }

            // ì‹œì‘ ë²„íŠ¼: 'ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°' ì²´í¬ ì‹œ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            document.getElementById('intro-start')?.addEventListener('click', () => {
                const noShow = document.getElementById('intro-no-show')?.checked;
                if (noShow) localStorage.setItem(STORAGE_KEY, 'true');
                introModal.hide();
            });

            // ëª¨ë‹¬ì´ ë‹«í ë•Œ(ë‹¨ìˆœ ë‹«ê¸°)ì—ë„ ì²´í¬ë°•ìŠ¤ê°€ ì„ íƒë˜ì–´ ìˆìœ¼ë©´ ì €ì¥
            introModalEl.addEventListener('hidden.bs.modal', () => {
                const noShow = document.getElementById('intro-no-show')?.checked;
                if (noShow) localStorage.setItem(STORAGE_KEY, 'true');
            });
        })();
    </script>

    <!-- SPA ìŠ¤í¬ë¡¤ ë° íˆìŠ¤í† ë¦¬ ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        (function () {
            const openAlbumBtn = document.getElementById('open-album');
            const openMessageBtn = document.getElementById('open-message');
            const albumSection = document.getElementById('album-section');
            const carouselSection = document.getElementById('carousel-section');
            const messagePage = document.getElementById('message-page');
            const bgMusic = document.getElementById('bg-music');
            // ìƒë‹¨ì˜ CTA/ì„¹ì…˜(.message-section)ì„ ëª¨ì•„ ì œì–´
            const messageCTAs = Array.from(document.querySelectorAll('.message-section'));
            const heroSection = document.querySelector('.hero-section');
            const flipContainer = document.querySelector('.flip-container');

            function showHome(push = true) {
                // í˜ì´ì§€ íƒ€ì´í‹€ ë³´ì´ê¸°
                heroSection?.classList.remove('d-none');
                // ìƒë‹¨ CTAë“¤ ë³´ì´ê²Œ
                messageCTAs.forEach(el => el.classList.remove('d-none'));

                // ë§Œì•½ ì•¨ë²”ì´ ë³´ì´ëŠ” ìƒíƒœì—ì„œ ëŒì•„ê°€ëŠ” ê²½ìš°, ì±… ë„˜ê¹€ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰
                if (flipContainer && albumSection && !albumSection.classList.contains('d-none')) {
                    // ì¤€ë¹„: ìºëŸ¬ì…€ ë³´ì´ê²Œ í•˜ê³  íŒ¨ë„ í´ë˜ìŠ¤ ë¶€ì—¬
                    -                    carouselSection?.classList.remove('d-none');
                    +                    carouselSection?.classList.remove('d-none');
                    carouselSection?.classList.add('flip-panel', 'flip-in');
                    albumSection?.classList.add('flip-panel', 'flip-out');

                    const onEnd = () => {
                        albumSection.classList.add('d-none');
                        albumSection.classList.remove('flip-out', 'flip-panel');
                        carouselSection.classList.remove('flip-in', 'flip-panel');
                        albumSection.removeEventListener('animationend', onEnd);
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    };
                    albumSection.addEventListener('animationend', onEnd);
                } else {
                    // ì¼ë°˜ ë³µê·€: ì•¨ë²”ì€ ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ìœ¼ë¡œ ìœ ì§€
                    carouselSection?.classList.remove('d-none');
                    albumSection?.classList.add('d-none');
                    messagePage?.classList.add('d-none');
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }

                if (push) history.pushState({ page: 'home' }, '', '#');
            }

            function showAlbum(push = true) {
                // ë©”ì‹œì§€ í˜ì´ì§€ ìˆ¨ê¹€ ë° ìƒë‹¨ CTA ìˆ¨ê¹€
                messagePage?.classList.add('d-none');
                messageCTAs.forEach(el => el.classList.add('d-none'));
                +                // í˜ì´ì§€ íƒ€ì´í‹€ ë³´ì´ê¸°
                    +                heroSection?.classList.remove('d-none');

                // ì±… ë„˜ê¹€ ì• ë‹ˆë©”ì´ì…˜ì´ ê°€ëŠ¥í•œ ê²½ìš°: ìºëŸ¬ì…€ì—ì„œ ì•¨ë²”ìœ¼ë¡œ ë„˜ê¹€
                if (flipContainer && carouselSection) {
                    // ì¤€ë¹„: ì•¨ë²”ì„ ë¯¸ë¦¬ ë³´ì´ê²Œ í•˜ê³  ì• ë‹ˆë©”ì´ì…˜ ë¶€ì—¬
                    albumSection?.classList.remove('d-none');
                    carouselSection.classList.add('flip-panel', 'flip-out');
                    albumSection.classList.add('flip-panel', 'flip-in');

                    const onEnd = () => {
                        // ì• ë‹ˆë©”ì´ì…˜ ëë‚˜ë©´ ìºëŸ¬ì…€ ìˆ¨ê¸°ê³  í´ë˜ìŠ¤ ì •ë¦¬
                        carouselSection.classList.add('d-none');
                        carouselSection.classList.remove('flip-out', 'flip-panel');
                        albumSection.classList.remove('flip-in', 'flip-panel');
                        albumSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        carouselSection.removeEventListener('animationend', onEnd);
                    };
                    // animationendëŠ” ì•„ì›ƒ ì• ë‹ˆë©”ì´ì…˜ì„ ì‹¤í–‰í•œ ìª½ì—ì„œ ì¼ì–´ë‚˜ë¯€ë¡œ carouselSectionì— ë°”ì¸ë“œ
                    carouselSection.addEventListener('animationend', onEnd);
                } else {
                    // ì• ë‹ˆë©”ì´ì…˜ ë¶ˆê°€ ì‹œ ì¼ë°˜ ë™ì‘
                    carouselSection?.classList.remove('d-none');
                    albumSection?.classList.remove('d-none');
                    albumSection?.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }

                if (push) history.pushState({ page: 'album' }, '', '#album');
            }

            function showMessage(push = true) {
                +                // í˜ì´ì§€ íƒ€ì´í‹€ ìˆ¨ê¸°ê¸°
                    +                heroSection?.classList.add('d-none');
                +                // ë©”ì‹œì§€ ì „ìš© í˜ì´ì§€ë¥¼ ë³´ì´ê²Œ í•˜ê³  ë‹¤ë¥¸ ì„¹ì…˜ì€ ìˆ¨ê¹€
                    +                carouselSection?.classList.add('d-none');
                +                albumSection?.classList.add('d-none');
                +                messagePage?.classList.remove('d-none');
                // ìƒë‹¨ CTAë“¤ ìˆ¨ê¹€
                messageCTAs.forEach(el => el.classList.add('d-none'));
                messagePage?.scrollIntoView({ behavior: 'smooth', block: 'start' });
                if (push) history.pushState({ page: 'message' }, '', '#message');
            }

            openAlbumBtn?.addEventListener('click', () => showAlbum());
            openMessageBtn?.addEventListener('click', () => showMessage());
            document.getElementById('back-home')?.addEventListener('click', () => showHome());
            // ì•¨ë²” ì„¹ì…˜ í•˜ë‹¨ì˜ í™ˆ ë²„íŠ¼
            document.getElementById('back-home-album')?.addEventListener('click', () => showHome());

            // popstate ì²˜ë¦¬: í•´ì‹œì— ë”°ë¼ ìƒíƒœ ë³µêµ¬
            window.addEventListener('popstate', () => {
                const h = location.hash;
                if (h === '#album') showAlbum(false);
                else if (h === '#message') showMessage(false);
                else showHome(false);
            });

            // ì´ˆê¸° ë¡œë“œ ì‹œ í•´ì‹œê°€ ìˆìœ¼ë©´ í•´ë‹¹ ìœ„ì¹˜ë¡œ ì²˜ë¦¬
            if (location.hash === '#album') showAlbum(false);
            else if (location.hash === '#message') showMessage(false);

            // ê¸°ì¡´ BGM í† ê¸€(ê°„ë‹¨ ìœ ì§€)
            const musicBtn = document.getElementById('music-btn');
            // ë²„íŠ¼ í…ìŠ¤íŠ¸ ìƒíƒœ ë°˜ì˜
            function updateMusicBtn() {
                if (!musicBtn || !bgMusic) return;
                // ìŒì†Œê±° ë˜ëŠ” ì¬ìƒì¤‘ì´ ì•„ë‹ˆë©´ 'ì‘ê²Œ' ì•„ì´ì½˜
                if (bgMusic.muted || bgMusic.paused) musicBtn.textContent = 'BGM ğŸ”ˆ';
                else musicBtn.textContent = 'BGM ğŸ”Š';
            }

            // ì´ˆê¸° ìƒíƒœ ë°˜ì˜ (ì˜¤ë””ì˜¤ ë¡œë“œê°€ ëŠ¦ì„ ìˆ˜ ìˆì–´ ì•½ê°„ ì§€ì—°)
            setTimeout(updateMusicBtn, 150);

            musicBtn?.addEventListener('click', async () => {
                if (!bgMusic) return;
                if (bgMusic.muted) {
                    // ìŒì†Œê±° í•´ì œ í›„ ì¬ìƒ ì‹œë„
                    bgMusic.muted = false;
                    try {
                        await bgMusic.play();
                    } catch (e) {
                        // ì¬ìƒ ì‹¤íŒ¨ ì‹œ í˜„ì¬ ìœ„ì¹˜ ì´ˆê¸°í™” í›„ ì¬ì‹œë„
                        try { bgMusic.currentTime = 0; await bgMusic.play(); } catch (e) { }
                    }
                } else {
                    // ìŒì†Œê±° (ì¼ì‹œì •ì§€ ëŒ€ì‹  ìŒì†Œê±°)
                    bgMusic.muted = true;
                }
                updateMusicBtn();
            });
        })();
    </script>

    <script>
        (function () {
            // ê¸°ì¡´ SPA ë° BGM ë¡œì§ì€ ìœ„ì— ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.

            // --- ì¸ë„¤ì¼ ë™ì  ìƒì„± ---
            // ì—¬ê¸°ì— í‘œì‹œí•  ì´ë¯¸ì§€ íŒŒì¼ ê²½ë¡œë¥¼ ë°°ì—´ì— ì¶”ê°€í•˜ì„¸ìš”.
            const albumImages = [
                'images/sub1.jpg',
                'images/sub2.jpg',
                'images/sub3.jpg',
                'images/sub4.jpg',
                'images/sub5.jpg',
                'images/sub6.jpg',
                'images/sub7.jpg',
                'images/sub8.jpg',
                'images/sub9.jpg',
                'images/sub10.jpg',
                'images/sub11.jpg',
                'images/sub12.jpg',
                'images/sub13.jpg',
                'images/sub14.jpg',
                'images/sub15.jpg',
                'images/sub16.jpg',
                'images/sub17.jpg',
                'images/sub18.jpg',
                'images/sub19.jpg',
                'images/sub20.jpg',
                'images/sub21.jpg',
                'images/sub22.jpg',
                'images/sub23.jpg',
                'images/sub24.jpg',
                'images/sub25.jpg',
            ];

            const albumRow = document.getElementById('album-row');
            albumImages.forEach((src, idx) => {
                const col = document.createElement('div');
                col.className = 'col-6';
                col.innerHTML = `<img src="${src}" class="img-fluid rounded album-img album-thumb" data-index="${idx}" alt="">`;
                albumRow.appendChild(col);
            });

            // --- ì•¨ë²” ê°¤ëŸ¬ë¦¬ ì œì–´ ---
            const albumThumbs = Array.from(document.querySelectorAll('.album-thumb'));
            const albumThumbSrcs = albumThumbs.map(t => t.getAttribute('src'));
            const carouselCardImgs = Array.from(document.querySelectorAll('.card .card-img-top'));
            const carouselCardSrcs = carouselCardImgs.map(i => i.getAttribute('src'));
            const albumModalEl = document.getElementById('albumModal');
            const albumModalImg = document.getElementById('album-modal-img');
            const prevBtn = document.getElementById('album-prev');
            const nextBtn = document.getElementById('album-next');
            let currentIndex = 0;
            let bsAlbumModal = null;
            // activeList: í˜„ì¬ ëª¨ë‹¬ì—ì„œ ìˆœíšŒí•  ì´ë¯¸ì§€ src ë°°ì—´ (ê¸°ë³¸: ì•¨ë²” ì¸ë„¤ì¼)
            let activeList = albumThumbSrcs.slice();

            function openAlbumAt(index, list = activeList) {
                if (!list || !list.length) return;
                activeList = list; // í˜„ì¬ í™œì„± ëª©ë¡ ì„¤ì •
                currentIndex = (index + list.length) % list.length;
                const src = list[currentIndex];
                albumModalImg.setAttribute('src', src);
                if (!bsAlbumModal) bsAlbumModal = new bootstrap.Modal(albumModalEl);
                bsAlbumModal.show();
            }

            function showNext() { openAlbumAt(currentIndex + 1, activeList); }
            function showPrev() { openAlbumAt(currentIndex - 1, activeList); }

            // ê¸°ì¡´ ì•¨ë²” ì¸ë„¤ì¼ í´ë¦­: ì•¨ë²” ëª©ë¡ìœ¼ë¡œ ì—°ë‹¤
            albumThumbs.forEach((thumb, idx) => {
                thumb.style.cursor = 'pointer';
                thumb.addEventListener('click', () => {
                    openAlbumAt(idx, albumThumbSrcs);
                });
            });

            // ìºëŸ¬ì…€ ì¹´ë“œ(.card-img-top) í´ë¦­ ì‹œ ìºëŸ¬ì…€ ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸ë§Œ ë³´ì—¬ì£¼ê¸°
            document.querySelectorAll('.card .card-img-top').forEach(imgEl => {
                imgEl.style.cursor = 'zoom-in';
                imgEl.addEventListener('click', (e) => {
                    const src = imgEl.getAttribute('src');
                    // ìºëŸ¬ì…€ ëª©ë¡ì—ì„œ ì¸ë±ìŠ¤ ì°¾ê¸°
                    const matchInCarousel = carouselCardSrcs.findIndex(s => s === src);
                    if (matchInCarousel >= 0) {
                        openAlbumAt(matchInCarousel, carouselCardSrcs);
                        return;
                    }
                    // ì•„ë‹ˆë©´ ì•¨ë²” ì¸ë„¤ì¼ ëª©ë¡ì—ì„œ ì°¾ì•„ ì—´ê¸°
                    const matchIdx = albumThumbSrcs.findIndex(s => s === src);
                    if (matchIdx >= 0) {
                        openAlbumAt(matchIdx, albumThumbSrcs);
                    } else {
                        // ì¼ì¹˜í•˜ëŠ” í•­ëª©ì´ ì—†ìœ¼ë©´ í˜„ì¬ activeListë¡œ í‘œì‹œ (ê¸°ë³¸ ë™ì‘)
                        openAlbumAt(0, [src]);
                    }
                });
            });

            nextBtn?.addEventListener('click', showNext);
            prevBtn?.addEventListener('click', showPrev);

            // í‚¤ë³´ë“œ ì œì–´: ì™¼ìª½/ì˜¤ë¥¸ìª½/ESC
            document.addEventListener('keydown', (e) => {
                if (!albumModalEl.classList.contains('show')) return;
                if (e.key === 'ArrowRight') showNext();
                else if (e.key === 'ArrowLeft') showPrev();
                else if (e.key === 'Escape') bsAlbumModal?.hide();
            });

        })();
    </script>

    <script>
        (function () {
            // --- í¸ì§€ ë°ì´í„°(ì˜ˆì‹œ) ---
            const letters = [
                { title: 'í•¨ê»˜í•œ ì‹œê°„ì—', body: `ë„ì¤ê¸°ê¹…ë¦­ì €ë‹¤ ê°“ì•ˆ ê°€ë‹¤ì•„ í•´ê¸°ì´ì— ì´í’‰ì˜¨ê¹¨ê±´ ì´ìœ¼ìœì†ìœ¼ë©´ ìœ¼ë™ì¿¤ê¸°ë† ê°ˆë‹¥ìê¹Œì§€ í†¨í†³ì— ë¹„ë¼ê³ . ì˜µì‹„ë‹¤ ì¡°íˆëˆ¤ ë‹Œê¹Œí•™ì¹˜ê°€ í˜¹ê°ì˜¨ìœ¼ì£¶ ë”ë…œì¡°ê³  ì—ˆì„ ì„¬ê°­ì•„ ì‹œìŠˆë…¸íŠ¸ëŠ” ì¦˜ìë”œìì—ê²Œ ì–¸ì„¹ì•°ê²¨. í–‡ëˆì¹´ë°©ìœ¼ë¡œ ì‹¤ì¸ì–´ë„ ë””ê°€ì• ëŠ” ì ˆì¹¸ë°êµ¬í¢ì€ í˜¸ì€ì´ì§€ í—‰ë°° ìí‹¸ë¦¬ì´ë‹¤ ê²¡ì§•ì˜ ìƒŒì•™ì˜ ë‘ë´”ê·¸ì—‰ì©ë‘ ì˜ ì¡˜ì£¼ì—. í—˜ì¹˜ë©° ëŒ€ì§€ê°„ë‹¤ ë“±ì‚¬ë¥¼ ì—‘ë„ë¯¸ ì´ìš´í…Œì˜ ê°¸ ê°€ìº‰ëƒ‰. ì•ˆë«„ì— ë¹ ì…€ì´í‘  ê¼‰ê¹Œìœ¼ì™€ ë‹ˆí ë¡œë¸¡ì• ê³±ì„ ì£¼ëª¨ë¯ˆ. ì•ˆì‹œì¡´ì¼íƒ€ëˆˆì™€ëˆˆê³  ë„¨ê±°ë¦¿ê³  ìì¹¸ì´ê³¡ê·¹ì‹¸ì˜ ì´ìŠ¬ì’‚ì‹œê³  ë£¨ë¢ˆ ì—¤ë¤ë‹¤ ë²„ë”ì‹œë¡œ ê±°ììŠ¹ë°”íŒŒë¡œ.`, author: 'ì¹œêµ¬ A' }
            ];

            // í¸ì§€ ëª©ë¡ ìƒì„±
            const lettersRow = document.getElementById('letters-row');
            letters.forEach((it, idx) => {
                const col = document.createElement('div');
                col.className = 'col-12 col-md-6';
                col.innerHTML = `
                    <div class="envelope" data-index="${idx}">
                        <div class="cover" aria-hidden="true"><div class="click-hint" aria-hidden="true">í„°ì¹˜í•´ë´!</div></div>
                        <div class="envelope-content">
                            <div class="from">${it.author}</div>
                            <div class="title">${it.title}</div>
                            <div class="preview">${it.body.replace(/\n/g, ' ').slice(0, 80)}${it.body.length > 80 ? '...' : ''}</div>
                        </div>
                    </div>
                `;
                lettersRow.appendChild(col);
            });

            // ëª¨ë‹¬ ì œì–´
            const letterModalEl = document.getElementById('letterModal');
            const letterTitle = document.getElementById('letter-title');
            const letterMeta = document.getElementById('letter-meta');
            const letterBody = document.getElementById('letter-body');
            const prevBtn = document.getElementById('letter-prev');
            const nextBtn = document.getElementById('letter-next');
            let current = 0;
            let bsLetter = null;

            function openLetterAt(i) {
                current = (i + letters.length) % letters.length;
                const it = letters[current];
                letterTitle.textContent = it.title;
                letterMeta.textContent = it.author;
                letterBody.textContent = it.body;
                if (!bsLetter) bsLetter = new bootstrap.Modal(letterModalEl);
                bsLetter.show();
            }

            // í´ë¦­í•˜ë©´ í¸ì§€ì§€ ì—´ë¦¬ëŠ” ì• ë‹ˆë©”ì´ì…˜ í›„ ëª¨ë‹¬ ì˜¤í”ˆ
            lettersRow.querySelectorAll('.envelope').forEach(el => {
                el.style.cursor = 'pointer';
                el.addEventListener('click', () => {
                    if (el.classList.contains('opening')) return; // ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
                    el.classList.add('opening');

                    // ì• ë‹ˆë©”ì´ì…˜ ëë‚˜ë©´ ëª¨ë‹¬ ì˜¤í”ˆ
                    const done = () => {
                        el.removeEventListener('animationend', done);
                        // ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ ì œê±°í•˜ì—¬ ìƒíƒœ ë³µêµ¬
                        el.classList.remove('opening');
                        const idx = parseInt(el.dataset.index || '0', 10);
                        openLetterAt(idx);
                    };

                    // ì•ˆì „í•˜ê²Œ animationendë¥¼ ê¸°ë‹¤ë¦¬ê±°ë‚˜ 700ms í›„ì— ê°•ì œ ì‹¤í–‰
                    el.addEventListener('animationend', done);
                    setTimeout(() => {
                        if (el.classList.contains('opening')) {
                            // íƒ€ì„ì•„ì›ƒìœ¼ë¡œ ì²˜ë¦¬ (ë¸Œë¼ìš°ì €ê°€ animationendë¥¼ ë°œìƒì‹œí‚¤ì§€ ëª»í•  ê²½ìš°)
                            el.classList.remove('opening');
                            const idx = parseInt(el.dataset.index || '0', 10);
                            openLetterAt(idx);
                        }
                    }, 700);
                });
            });

            nextBtn?.addEventListener('click', () => openLetterAt(current + 1));
            prevBtn?.addEventListener('click', () => openLetterAt(current - 1));

            document.addEventListener('keydown', (e) => {
                if (!letterModalEl.classList.contains('show')) return;
                if (e.key === 'ArrowRight') openLetterAt(current + 1);
                else if (e.key === 'ArrowLeft') openLetterAt(current - 1);
                else if (e.key === 'Escape') bsLetter?.hide();
            });

        })();


    </script>


    <!-- <div class="snow"></div> -->
    <div class="snow snow-front"></div>
    <div class="snow-dim"></div>
    <div id="flakes"></div>


    <script>
        /* SVG ëˆˆê²°ì • ìƒì„±ê¸°: 3ì¢… íŒ¨í„´, ì´ë¯¸ì§€ íŒŒì¼ ë¶ˆí•„ìš” */
        (function () {
            const wrap = document.getElementById('flakes');
            if (!wrap) return;

            // === 3ì¢… SVG íŒ¨í„´ (ê°€ë²¼ìš´ ë¼ì¸ ê²°ì •) ===
            const S1 = `
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <g transform="translate(12,12)">
        <line x1="-10" y1="0" x2="10" y2="0"/>
        <line x1="0" y1="-10" x2="0" y2="10"/>
        <line x1="-7.07" y1="-7.07" x2="7.07" y2="7.07"/>
        <line x1="-7.07" y1="7.07" x2="7.07" y2="-7.07"/>
      </g>
    </svg>`;
            const S2 = `
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <g transform="translate(12,12)">
        <path d="M0,-10 L0,10 M-8.66,5 L8.66,-5 M-8.66,-5 L8.66,5"/>
        <path d="M0,-10 l-2,3 M0,-10 l2,3 M0,10 l-2,-3 M0,10 l2,-3"/>
        <path d="M-8.66,5 l3,-2 M-8.66,5 l3,2 M8.66,-5 l-3,2 M8.66,-5 l-3,-2"/>
      </g>
    </svg>`;
            const S3 = `
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <g transform="translate(12,12)">
        <circle r="2"/>
        <path d="M0,-10 L0,-2 M0,2 L0,10"/>
        <path d="M-10,0 L-2,0 M2,0 L10,0"/>
        <path d="M-7.5,-7.5 L-1.5,-1.5 M1.5,1.5 L7.5,7.5"/>
        <path d="M7.5,-7.5 L1.5,-1.5 M-1.5,1.5 L-7.5,7.5"/>
      </g>
    </svg>`;

            const SVGs = [S1, S2, S3];

            // === íŒŒë¼ë¯¸í„°(ì›í•˜ëŠ” ëŠë‚Œìœ¼ë¡œ ì¡°ì ˆ) ===
            const COUNT = 90;    // ë™ì‹œ ì¡´ì¬ ìˆ˜ (ëª¨ë°”ì¼ 50~70, ë°ìŠ¤í¬í†± 90~140 ê¶Œì¥)
            const MIN_DUR = 10;    // ë‚™í•˜ ìµœì†Œ ì§€ì†(ì´ˆ)
            const MAX_DUR = 18;    // ë‚™í•˜ ìµœëŒ€ ì§€ì†(ì´ˆ)
            const MIN_SIZE = 0.7;   // ìµœì†Œ ìŠ¤ì¼€ì¼
            const MAX_SIZE = 1.6;   // ìµœëŒ€ ìŠ¤ì¼€ì¼
            const SWAY_MIN = 60;    // ì¢Œìš° ì§„í­ ìµœì†Œ(px)
            const SWAY_MAX = 120;   // ì¢Œìš° ì§„í­ ìµœëŒ€(px)

            const rand = (a, b) => Math.random() * (b - a) + a;
            const pick = arr => arr[(Math.random() * arr.length) | 0];

            function spawn() {
                const node = document.createElement('div');
                node.className = 'snowflake ' + (Math.random() < 0.6 ? 'front' : 'back');
                node.innerHTML = pick(SVGs);

                // ëœë¤ ì†ì„±
                const startVW = rand(0, 100);                     // ì‹œì‘ X (vw)
                const s = rand(MIN_SIZE, MAX_SIZE).toFixed(2);    // í¬ê¸°
                const sway = (Math.random() < 0.5 ? -1 : 1) * rand(SWAY_MIN, SWAY_MAX); // ì¢Œìš° í­
                const dur = rand(MIN_DUR, MAX_DUR).toFixed(2);
                const delay = rand(-MAX_DUR, 0).toFixed(2);       // ìŒìˆ˜ ë”œë ˆì´ë¡œ ì¤‘ê°„ë¶€í„° ì‹œì‘ íš¨ê³¼

                node.style.left = startVW + 'vw';
                node.style.setProperty('--x', '0px');
                node.style.setProperty('--s', s);
                node.style.setProperty('--sw', sway + 'px');
                node.style.animation = `fall-sway-rotate ${dur}s linear ${delay}s infinite`;

                wrap.appendChild(node);

                // ì£¼ê¸° ëë‚˜ë©´ ì¬ìƒì„±(ë°€ë„ ìœ ì§€)
                setTimeout(() => {
                    if (node.isConnected) {
                        node.remove();
                        spawn();
                    }
                }, parseFloat(dur) * 1000);
            }

            // ì´ˆê¸° ìƒì„±
            for (let i = 0; i < COUNT; i++) spawn();

            // ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ê³¼ë‹¤/ë¶€ì¡± ë³´ì •
            let t;
            window.addEventListener('resize', () => {
                clearTimeout(t);
                t = setTimeout(() => {
                    const cur = wrap.children.length;
                    if (cur > COUNT) {
                        [...wrap.children].slice(0, cur - COUNT).forEach(n => n.remove());
                    } else {
                        while (wrap.children.length < COUNT) spawn();
                    }
                }, 180);
            });
        })();
    </script>
    <script>
(function(){
  // ì•¨ë²” ì„¹ì…˜ ì•ˆì˜ .album-thumbë“¤ì„ 3ì¥ì”© ë¬¶ì–´ì„œ
  // #album-section ë‚´ë¶€ì— "í•„ë¦„ìŠ¤íŠ¸ë¦½ ìºëŸ¬ì…€" ì„¹ì…˜ì„ 1íšŒ ìƒì„±
  const albumSection = document.getElementById('album-section');
  const openBtn = document.getElementById('open-album');

  function buildFilmstripFromAlbum(){
    if (!albumSection || albumSection.dataset.filmstripReady === '1') return;

    // ì´ë¯¸ ë™ì  ìƒì„±ëœ ì•¨ë²” ì¸ë„¤ì¼ì„ ë°ì´í„° ì†ŒìŠ¤ë¡œ ì‚¬ìš©
    const thumbs = albumSection.querySelectorAll('.album-thumb');
    if (!thumbs.length) return; // ì¸ë„¤ì¼ì´ ì•„ì§ ì—†ìœ¼ë©´ ìƒì„± ë³´ë¥˜

    const images = Array.from(thumbs).map(img => ({
      src: img.getAttribute('src'),
      alt: img.getAttribute('alt') || ''
    }));

    // 3ì¥ì”© ë¬¶ê¸°
    const per = 3, slides = [];
    for (let i=0; i<images.length; i+=per){
      slides.push(images.slice(i, i+per));
    }

    // ì„¹ì…˜ ë§ˆí¬ì—… ìƒì„± (h2 ë°”ë¡œ ì•„ë˜ì— ì‚½ì…)
    const wrap = document.createElement('section');
    wrap.id = 'filmstrip-album';
    wrap.className = 'mt-4';
    wrap.innerHTML = `
      <div class="d-flex justify-content-between align-items-end mb-2">
        <h2 class="mb-0">ğŸï¸ ì¶”ì–µ ì•¨ë²”</h2>
        <small class="text-muted">ì¸ë„¤ì¼ í´ë¦­ìœ¼ë¡œ ì´ë™</small>
      </div>

      <div id="filmCarousel" class="carousel slide" data-bs-ride="false">
        <div class="carousel-inner" style='border-radius: 10px;'>
          ${slides.map((g,idx)=>`
            <div class="carousel-item ${idx===0?'active':''}">
              <div class="film-frame">
                <div class="row g-3 px-3">
                  ${g.map(o=>`
                    <div class="col-12 col-md-4">
                      <img class="film-img" src="${o.src}" alt="${o.alt}">
                    </div>
                  `).join('')}
                </div>
              </div>
            </div>
          `).join('')}
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#filmCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#filmCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>

      <div class="thumbs d-flex gap-2 justify-content-center mt-3" id="filmThumbs">
        ${slides.map((g,idx)=>`
          <button class="btn p-0 border-0 ${idx===0?'active':''}"
                  data-bs-target="#filmCarousel" data-bs-slide-to="${idx}"
                  aria-label="${idx+1}ë²ˆì§¸ ìŠ¬ë¼ì´ë“œ">
            <img src="${g[0]?.src || ''}" alt="thumb${idx+1}">
          </button>
        `).join('')}
      </div>
    `;

    const h2 = albumSection.querySelector('h2');
    (h2 || albumSection.firstElementChild)?.insertAdjacentElement('afterend', wrap);

    // âœ… ì´ í•œ ì¤„ ì¶”ê°€: í•„ë¦„ìŠ¤íŠ¸ë¦½ì´ ìˆìŒì„ í‘œì‹œ â†’ CSSê°€ ê¸°ì¡´ ê·¸ë¦¬ë“œ ìˆ¨ê¹€
    albumSection.classList.add('with-filmstrip');

    // ì¸ë„¤ì¼-ìŠ¬ë¼ì´ë“œ ë™ê¸°í™”
    const carouselEl = wrap.querySelector('#filmCarousel');
    const thumbsBar = wrap.querySelectorAll('#filmThumbs button');

    thumbsBar.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        thumbsBar.forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
      });
    });

    carouselEl.addEventListener('slid.bs.carousel', (e)=>{
      const idx = e.to;
      thumbsBar.forEach(b=>b.classList.remove('active'));
      thumbsBar[idx]?.classList.add('active');
    });

    albumSection.dataset.filmstripReady = '1'; // ì¬ìƒì„± ë°©ì§€
  }

  // 1) â€œì¶”ì–µ ì•¨ë²” ë³´ê¸°â€ ë²„íŠ¼ ëˆŒë €ì„ ë•Œ ìƒì„±
  openBtn?.addEventListener('click', ()=>{
    // ì•¨ë²” ì„¹ì…˜ì´ ë³´ì´ë„ë¡ í† ê¸€ëœ ì§í›„ DOMì´ ì¤€ë¹„ë˜ë‹ˆ ì•½ê°„ ë’¤ì— ì‹¤í–‰
    setTimeout(buildFilmstripFromAlbum, 0);
  });

  // 2) ë°”ë¡œ #album í•´ì‹œë¡œ ì§„ì…í•œ ê²½ìš°(ìƒˆë¡œê³ ì¹¨ ë“±)ë„ ëŒ€ë¹„
  if (location.hash === '#album') {
    // ê¸°ì¡´ í•´ì‹œ ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸ê°€ ì„¹ì…˜ í† ê¸€í•œ ë’¤ ì‹¤í–‰ë˜ë„ë¡ ì•½ê°„ ì§€ì—°
    window.addEventListener('load', ()=> setTimeout(buildFilmstripFromAlbum, 50));
  }
})();
</script>
<script>
/* í™”ë©´ ê°€ë¡œ/ì„¸ë¡œ ë¹„ìœ¨ì— ë§ì¶° ì¸ë„¤ì¼ ë„ˆë¹„(--thumb-w) ë™ì  ì¡°ì • */
(function(){
  function updateThumbSize(){
    const wrappers = document.querySelectorAll('#filmstrip-section, #filmstrip-album');
    if(!wrappers.length) return;

    const w = Math.max(1, window.innerWidth);
    const h = Math.max(1, window.innerHeight);
    const ratio = w / h;                // >1: ê°€ë¡œí˜•(ëœë“œìŠ¤ì¼€ì´í”„), <=1: ì„¸ë¡œí˜•(í¬íŠ¸ë ˆì´íŠ¸)

    // ê¸°ë³¸ í¬ê¸° ê³„ì‚°: ì„¸ë¡œí˜•ì€ í­ ê¸°ì¤€, ê°€ë¡œí˜•ì€ ë†’ì´ ê¸°ì¤€ìœ¼ë¡œ ì‚°ì •
    // (ìµœì†Œ 64px ~ ìµœëŒ€ 128px ì•ˆì—ì„œ ìŠ¤ë¬´ë”©)
    const base = ratio > 1
      ? Math.min(128, Math.max(64, Math.round(h * 0.12)))   // landscape: ë†’ì´ì˜ 12%
      : Math.min(128, Math.max(64, Math.round(w * 0.22)));  // portrait: ë„ˆë¹„ì˜ 22%

    wrappers.forEach(el => el.style.setProperty('--thumb-w', base + 'px'));
  }

  // ìµœì´ˆ/ë¦¬ì‚¬ì´ì¦ˆ/íšŒì „ ë³€í™”ë§ˆë‹¤ ê°±ì‹ 
  window.addEventListener('resize', updateThumbSize);
  window.addEventListener('orientationchange', updateThumbSize);
  window.addEventListener('load', updateThumbSize);
  updateThumbSize();
})();
</script>
<script>
/* ìŠ¬ë¼ì´ë“œ ì‹œì ì— ë¦´ ê°€ì†/í‚¥ í´ë˜ìŠ¤ í† ê¸€ */
(function(){
  const film = document.getElementById('filmCarousel');
  if(!film) return;

  film.addEventListener('slide.bs.carousel', ()=>{
    film.classList.add('reel-spin');          // ê°€ì† + í‚¥ ON
    setTimeout(()=> film.classList.remove('reel-spin'), 700); // í˜¹ì‹œ ëª¨ë¥¼ ëˆ„ë½ ëŒ€ë¹„ ìë™ í•´ì œ
  });

  film.addEventListener('slid.bs.carousel', ()=>{
    film.classList.remove('reel-spin');       // ìŠ¬ë¼ì´ë“œ ì™„ë£Œ ì‹œ í•´ì œ
  });
})();
</script>
<script>
/* Film Overlay Injector: ìƒì„±ëœ ëª¨ë“  .film-frameì— ìŠ¤í¬ë˜ì¹˜/ë¨¼ì§€/ë¹„ë„¤íŠ¸ ë ˆì´ì–´ ì¶”ê°€ */
(function(){
  function addOverlays(root=document){
    const frames = root.querySelectorAll?.('.film-frame') ?? [];
    frames.forEach(f=>{
      if (f.dataset.overlayReady === '1') return;
      ['overlay-scratches','overlay-dust','overlay-vignette'].forEach(cls=>{
        const d = document.createElement('div');
        d.className = cls;
        f.appendChild(d);
      });
      f.dataset.overlayReady = '1';
    });
  }

  // ì²˜ìŒ í•œ ë²ˆ ì ìš©
  addOverlays(document);

  // ì´í›„ ë™ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” í•„ë¦„ í”„ë ˆì„ì—ë„ ìë™ ì ìš©
  const mo = new MutationObserver(muts=>{
    for(const m of muts){
      for(const n of m.addedNodes){
        if(n.nodeType!==1) continue;
        if(n.matches?.('.film-frame')) addOverlays(n);
        else addOverlays(n);
      }
    }
  });
  mo.observe(document.body, { childList:true, subtree:true });

  // ê°€ë¡œ/ì„¸ë¡œ ì „í™˜ì´ë‚˜ ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ë¯¸ì„¸ ê°•ë„ ì¡°ì ˆ(ì„ íƒ)
  function tuneByViewport(){
    const landscape = window.innerWidth > window.innerHeight;
    document.querySelectorAll('.film-frame').forEach(f=>{
      f.style.setProperty('--scratch-opacity', landscape ? '.2' : '.25');
      f.style.setProperty('--dust-opacity', landscape ? '.1' : '.14');
    });
  }
  window.addEventListener('resize', tuneByViewport);
  window.addEventListener('orientationchange', tuneByViewport);
  window.addEventListener('load', tuneByViewport);
  tuneByViewport();
})();
</script>

</body>

</html>
