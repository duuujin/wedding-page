<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¹œêµ¬ ê²°í˜¼ ì¶•í•˜ í˜ì´ì§€</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- ì»¤ìŠ¤í…€ CSS -->
    <link rel="stylesheet" href="css/style.css">
    <style>
        @font-face {
            font-family: 'OngleIpSeaBreeze';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/2510-1@1.0/Ownglyph_the_sea_breeze-Rg.woff2') format('woff2');
            font-weight: normal;
            font-display: swap;
        }

        /* ì•¨ë²” ì„¹ì…˜ ê²½ê³„ ë° ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
        #album-section {
            border-top: 2px solid rgba(0, 0, 0, 0.06);
            padding-top: 1.5rem;
            margin-top: 1.5rem;
        }

        .album-img {
            border: 1px solid rgba(0, 0, 0, 0.06);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
            transition: transform .18s ease, box-shadow .18s ease;
            display: block;
            width: 100%;
            height: auto;
        }

        .album-img:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
        }

        /* ì•¨ë²” ëª¨ë‹¬: ìºëŸ¬ì…€ ìŠ¤íƒ€ì¼ í™”ì‚´í‘œ ì‚¬ìš©, íˆ¬ëª…í•œ ë²„íŠ¼ */
        #album-prev,
        #album-next {
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
        }

        /* ìºëŸ¬ì…€ ì•„ì´ì½˜ì„ í°ìƒ‰ìœ¼ë¡œ ë³´ì´ê²Œ ì¡°ì • */
        #album-prev .carousel-control-prev-icon,
        #album-next .carousel-control-next-icon {
            width: 28px;
            height: 28px;
            background-size: 28px 28px;
            /* í°ìƒ‰ìœ¼ë¡œ í™•ì‹¤íˆ ë³´ì´ë„ë¡ í•„í„° ì ìš© ë° ì¤‘ìš”ë„ ìš°ì„  ì²˜ë¦¬ */
            filter: invert(1) brightness(2) !important;
            background-color: transparent !important;
        }

        /* ì¶”ê°€: ì•„ì´ì½˜ì´ ê²€ì • ê³„ì—´ ì´ë¯¸ì§€ì¼ ê²½ìš°ì—ë„ í°ìƒ‰ìœ¼ë¡œ ë³´ì´ê²Œ ë³´ì • (ëŒ€ì²´ë°©ë²•) */
        #album-prev .carousel-control-prev-icon::before,
        #album-next .carousel-control-next-icon::before {
            content: '';
        }

        #album-prev:hover,
        #album-next:hover {
            background: rgba(255, 255, 255, 0.06) !important;
        }

        .music-control .btn {
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
            color: inherit;
        }

        /* í¸ì§€ ìŠ¤íƒ€ì¼ */
        .envelope {
            background: linear-gradient(180deg, #f8f4ea 0%, #fffdf8 100%);
            border-radius: 6px;
            border: 1px solid rgba(0, 0, 0, 0.06);
            padding: 18px;
            position: relative;
            overflow: hidden;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            perspective: 900px;
            /* 3D íš¨ê³¼ë¥¼ ìœ„í•œ ì›ê·¼ */
        }

        .envelope .cover {
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, #fffef8 0%, #f6efe0 100%);
            border-radius: 6px;
            z-index: 2;
            transform-origin: top center;
            backface-visibility: hidden;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
        }

        /* í´ë¦­ íŒíŠ¸ (ê¹œë¹¡ì´ëŠ” í…ìŠ¤íŠ¸) */
        .envelope .cover .click-hint {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            font-size: 1rem;
            padding: 8px 12px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.92);
            color: #444;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
            pointer-events: none;
            /* í´ë¦­ì€ ì „ì²´ ì¹´ë“œì—ì„œ ì²˜ë¦¬ */
            z-index: 3;
            animation: clickBlink 1.4s linear infinite;
        }

        @keyframes clickBlink {
            0% {
                opacity: 1;
                transform: translateY(0);
            }

            50% {
                opacity: 0.15;
                transform: translateY(-2px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .envelope .envelope-content {
            position: relative;
            z-index: 1;
        }

        .envelope.opening .cover {
            animation: envelopeOpen 600ms cubic-bezier(.2, .9, .3, 1) forwards;
        }

        @keyframes envelopeOpen {
            0% {
                transform: rotateX(0deg);
                opacity: 1;
            }

            70% {
                transform: rotateX(-85deg);
                opacity: 0.9;
            }

            100% {
                transform: rotateX(-95deg) translateY(-10%);
                opacity: 0;
            }
        }

        /* í¸ì§€ ëª¨ë‹¬(ì¢…ì´ ëŠë‚Œ) */
        .letter-paper {
            background: linear-gradient(180deg, #fff 0%, #fffefc 100%);
            border-radius: 6px;
            padding: 28px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
            max-height: 70vh;
            overflow: auto;
            font-family: 'OngleIpSeaBreeze', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
        }

        .letter-paper h3 {
            margin-top: 0;
        }

        .letter-meta {
            color: #6b6b6b;
            font-size: 0.9rem;
            margin-bottom: 12px
        }

        .letter-body {
            white-space: pre-wrap;
            font-size: 1rem;
            color: #222
        }

        /* ì´ì „/ë‹¤ìŒ ë²„íŠ¼ ì‘ê²Œ ì¡°ì • */
        #letter-prev,
        #letter-next {
            width: 40px;
            height: 40px
        }

        /* í˜ì´ì§€ ì±… ë„˜ê¹€(í”Œë¦½) ì• ë‹ˆë©”ì´ì…˜ */
        .flip-container {
            perspective: 1200px;
        }

        .flip-panel {
            transform-style: preserve-3d;
            backface-visibility: hidden;
        }

        .flip-out {
            animation: flipOut 600ms cubic-bezier(.2, .9, .3, 1) forwards;
        }

        .flip-in {
            animation: flipIn 600ms cubic-bezier(.2, .9, .3, 1) forwards;
        }

        @keyframes flipOut {
            0% {
                transform: rotateY(0deg) translateX(0) scale(1);
                opacity: 1;
            }

            100% {
                transform: rotateY(-100deg) translateX(-18%) scale(0.95);
                opacity: 0;
            }
        }

        @keyframes flipIn {
            0% {
                transform: rotateY(100deg) translateX(18%) scale(0.95);
                opacity: 0;
            }

            100% {
                transform: rotateY(0deg) translateX(0) scale(1);
                opacity: 1;
            }
        }
    </style>
</head>

<body>


    <div class="music-control  top-0 end-0 m-3">
        <button id="music-btn" class="btn btn-sm btn-outline-secondary">BGM ğŸ”Š</button>
    </div>

    <!-- ë°°ê²½ ìŒì•… (í•œ ë²ˆë§Œ ì¬ìƒ) -->
    <audio id="bg-music" src="music/wedding-song.mp3" autoplay loop preload="auto" playsinline></audio>

    <!-- í˜ì´ì§€ íƒ€ì´í‹€ -->
    <div class="flip-container">
        <section class="hero-section text-center py-3">
            <h1>ğŸ‰ ê²°í˜¼ ì¶•í•˜í•´! ğŸ‰</h1>
            <p>ì´ˆë¼í•˜ì§€ë§Œ, ê²°í˜¼ ì „ì— ì´ê±° ë³´ë©´ì„œ ì˜› ìƒê° ë– ì˜¬ë ¤ë´!</p>
        </section>

        <!-- ì‚¬ì§„ ìŠ¬ë¼ì´ë“œ -->
        <section id="carousel-section" class="container py-3">
            <div id="weddingCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">

                    <!-- ì¹´ë“œ 1 -->
                    <div class="carousel-item active">
                        <div class="card">
                            <img src="images/main1.jpg" class="card-img-top" alt="ì‚¬ì§„ 1" data-bs-toggle="modal"
                                data-bs-target="#modal1">
                            <div class="card-body">
                                <p class="card-text text-center">ë§Œë‚¨ì˜ ì„¤ë ˜</p>
                            </div>
                        </div>
                    </div>

                    <!-- ì¹´ë“œ 2 -->
                    <div class="carousel-item">
                        <div class="card">
                            <img src="images/main2.jpg" class="card-img-top" alt="ì‚¬ì§„ 2" data-bs-toggle="modal"
                                data-bs-target="#modal2">
                            <div class="card-body">
                                <p class="card-text text-center">í•¨ê»˜í•œ ì—¬í–‰</p>
                            </div>
                        </div>
                    </div>

                    <!-- ì¹´ë“œ 3 -->
                    <div class="carousel-item">
                        <div class="card">
                            <img src="images/main3.jpg" class="card-img-top" alt="ì‚¬ì§„ 3" data-bs-toggle="modal"
                                data-bs-target="#modal3">
                            <div class="card-body">
                                <p class="card-text text-center">ì¶”ì–µì˜ ë°ì´íŠ¸</p>
                            </div>
                        </div>
                    </div>

                    <!-- ì¹´ë“œ 4 -->
                    <div class="carousel-item">
                        <div class="card">
                            <img src="images/main4.jpg" class="card-img-top" alt="ì‚¬ì§„ 4" data-bs-toggle="modal"
                                data-bs-target="#modal4">
                            <div class="card-body">
                                <p class="card-text text-center">ì¦ê±°ìš´ ìˆœê°„</p>
                            </div>
                        </div>
                    </div>

                    <!-- ì¹´ë“œ 5 -->
                    <div class="carousel-item">
                        <div class="card">
                            <img src="images/main5.jpg" class="card-img-top" alt="ì‚¬ì§„ 5" data-bs-toggle="modal"
                                data-bs-target="#modal5">
                            <div class="card-body">
                                <p class="card-text text-center">í–‰ë³µí•œ ë¯¸ì†Œ</p>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- í™”ì‚´í‘œ -->
                <button class="carousel-control-prev" type="button" data-bs-target="#weddingCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#weddingCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                </button>
            </div>
        </section>

        <!-- ì „í•˜ê³  ì‹¶ì€ ë§ í˜ì´ì§€ ë„˜ì–´ê°€ê¸° -->
    </div> <!-- .flip-container ë‹«ìŒ -->

    <!-- ì¶”ì–µì•¨ë²” ì„¹ì…˜ -->
    <section class="message-section text-center py-5">
        <h3>í–‰ë³µí•œ ê²°í˜¼ìƒí™œì„ ì‘ì›í• ê²Œ!</h3>
        <p>ì‚¬ë‘ê³¼ ì›ƒìŒì´ ê°€ë“í•œ ê°€ì •ì´ ë˜ê¸¸ ë°”ë„ê²Œ!</p>
        <!-- ì•¨ë²” í˜ì´ì§€ ì´ë™ ë²„íŠ¼ -> SPAìš© ìŠ¤í¬ë¡¤ ë²„íŠ¼ -->
        <button id="open-album" class="btn btn-outline-secondary mt-3">ì¶”ì–µ ì•¨ë²” ë³´ê¸°</button>
    </section>

    <!-- ë©”ì‹œì§€ ì„¹ì…˜ -->
    <section class="message-section text-center py-3">
        <h3>ì‹ í˜¼ë¶€ë¶€ì—ê²Œ ì „í•˜ëŠ” ë§</h3>
        <p>ì •ë§ ì´ˆë¼í•˜ê²Œ ì‘ì„±í•œê±°ì§€ë§Œ, ì¶•í•˜ì˜ ë©”ì„¸ì§€</p>
        <!-- ì•¨ë²” í˜ì´ì§€ ì´ë™ ë²„íŠ¼ -> SPAìš© ìŠ¤í¬ë¡¤ ë²„íŠ¼ -->
        <button id="open-message" class="btn btn-outline-secondary mt-4">ë©”ì„¸ì§€ ë³´ê¸°</button>
    </section>


    <!-- ë©”ì‹œì§€ ì „ìš© í˜ì´ì§€ (í¸ì§€ ëª©ë¡) -->
    <section id="message-page" class="container py-5 d-none">
        <h2 class="mb-4 text-center">ì‹ í˜¼ë¶€ë¶€ì—ê²Œ ì „í•˜ëŠ” í¸ì§€</h2>
        <div id="letters-row" class="row g-3 mb-4">
            <!-- JSê°€ í¸ì§€ ì¹´ë“œ ìƒì„± -->
        </div>
        <div class="text-center">
            <button id="back-home" class="btn btn-outline-secondary">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>
    </section>

    <!-- ì¶”ì–µ ì•¨ë²” ì„¹ì…˜ (ë™ì  ìƒì„±: ì‚¬ì§„ 2ì¥ì”© í‘œì‹œ) -->
    <!-- ê¸°ë³¸ì ìœ¼ë¡œ í˜ì´ì§€ ë¡œë“œ ì‹œ ë³´ì´ì§€ ì•Šê²Œ í•¨ (ë²„íŠ¼ìœ¼ë¡œ í‘œì‹œ) -->
    <section id="album-section" class="container py-4 d-none">
        <h2 class="mb-3">ì¶”ì–µ ì•¨ë²”</h2>
        <div id="album-row" class="row g-3">
            <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¸ë„¤ì¼ì´ ì—¬ê¸° ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>
        <!-- í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸° ë²„íŠ¼ ì¶”ê°€ -->
        <div class="text-center mt-3">
            <button id="back-home-album" class="btn btn-outline-secondary">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>
    </section>

    <!-- ëª¨ë‹¬ ë¶€ë¶„ (ì‚¬ì§„ í™•ëŒ€) -->
    <!-- ê¸°ì¡´ modal1~modal5 ìœ ì§€ (í•„ìš”ì‹œ ì‚­ì œ ê°€ëŠ¥) -->

    <!-- ì•¨ë²” ê°¤ëŸ¬ë¦¬ ëª¨ë‹¬ (ê³µí†µ) -->
    <div class="modal fade" id="albumModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content bg-transparent border-0 position-relative p-0">
                <button id="album-prev" class="carousel-control-prev position-absolute top-50 start-0 translate-middle-y ms-2" type="button" aria-label="ì´ì „">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                </button>
                <img id="album-modal-img" src="" class="w-100 rounded" alt="ì•¨ë²” ì‚¬ì§„">
                <button id="album-next" class="carousel-control-next position-absolute top-50 end-0 translate-middle-y me-2" type="button" aria-label="ë‹¤ìŒ">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                </button>
            </div>
        </div>
    </div>

    <!-- í¸ì§€ ì½ê¸° ëª¨ë‹¬ -->
    <div class="modal fade" id="letterModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-md">
            <div class="modal-content border-0 bg-transparent">
                <div class="position-relative">
                    <button id="letter-prev" class="carousel-control-prev position-absolute top-50 start-0 translate-middle-y ms-2" type="button" aria-label="ì´ì „">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    </button>
                    <div class="letter-paper mx-3" id="letter-modal-body">
                        <h3 id="letter-title"></h3>
                        <div class="letter-meta" id="letter-meta"></div>
                        <div class="letter-body" id="letter-body"></div>
                    </div>
                    <button id="letter-next" class="carousel-control-next position-absolute top-50 end-0 translate-middle-y me-2" type="button" aria-label="ë‹¤ìŒ">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ì¸íŠ¸ë¡œ ëª¨ë‹¬: ì²« ë°©ë¬¸ ì‹œ ì½ëŠ” ìˆœì„œ ì•ˆë‚´ -->
    <div class="modal fade" id="introModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">í˜ì´ì§€ ì‚¬ìš© ì•ˆë‚´</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
                </div>
                <div class="modal-body">
                    <p>ì´ í˜ì´ì§€ëŠ” ì•„ë˜ ìˆœì„œë¡œ ë³´ë©´ ì¢‹ì•„</p>
                    <ol>
                        <li>ìƒë‹¨ì˜ ì‚¬ì§„ ìŠ¬ë¼ì´ë“œë¥¼ ì‚´í´ë´</li>
                        <li>"ì¶”ì–µ ì•¨ë²” ë³´ê¸°" ë²„íŠ¼ì„ ëˆŒëŸ¬ ì•¨ë²”ìœ¼ë¡œ ì´ë™í•´</li>
                        <li>ì•¨ë²”ì—ì„œ ì‚¬ì§„ì„ í´ë¦­í•˜ë©´ í™•ëŒ€í•´ì„œ ë³´ê³ , ì¢Œìš° í™”ì‚´í‘œë¡œ ë„˜ê²¨ë´</li>
                        <li>ì•¨ë²” ë‹¤ ë´¤ìœ¼ë©´ ë©”ì„¸ì§€ ë³´ê¸° ëˆŒëŸ¬ë´</li>
                        <li>ë°‘ì— ë°°ê²½ìŒì•… ì¼œê¸° ë²„íŠ¼ë„ ëˆŒëŸ¬ì„œ ë“¤ìœ¼ë©´ì„œ ë´</li>
                    </ol>
                    <div class="form-check mt-2">
                        <input class="form-check-input" type="checkbox" value="" id="intro-no-show">
                        <label class="form-check-label" for="intro-no-show">ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°</label>
                    
<!-- <div class="form-check d-flex align-items-center justify-content-center gap-2 my-2">
  <input class="form-check-input" type="checkbox" id="remember-consent">
  <label class="form-check-label" for="remember-consent">ë‹¤ìŒë¶€í„°ëŠ” ìë™ìœ¼ë¡œ ì¼œê¸°</label>
</div> -->
<button id="enable-bgm" class="btn btn-primary w-100 py-2 mt-2">ë°°ê²½ìŒì•… ì¼œê¸° ğŸ”Š</button>
</div>
                </div>
                <div class="modal-footer">
                    <button id="intro-start" type="button" class="btn btn-primary">ì‹œì‘í•˜ê¸°</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- ì»¤ìŠ¤í…€ JS -->
    <script src="js/script.js"></script>

    <!-- ì¸íŠ¸ë¡œ ëª¨ë‹¬ í‘œì‹œ ìŠ¤í¬ë¦½íŠ¸ (ì²« ë°©ë¬¸ì—ë§Œ í‘œì‹œ) -->
    <script>
        (function(){
            const STORAGE_KEY = 'introSeen_v1';
            const introModalEl = document.getElementById('introModal');
            if(!introModalEl) return;
            const introSeen = localStorage.getItem(STORAGE_KEY);
            const introModal = new bootstrap.Modal(introModalEl);

            // ì²˜ìŒ ë°©ë¬¸ì´ë©´ ëª¨ë‹¬ í‘œì‹œ
            if(!introSeen){
                // ì•½ê°„ ì§€ì—°ì‹œì¼œ ë¶€íŠ¸ìŠ¤íŠ¸ë© ë¡œë“œ ë° ë Œë”ë§ ì•ˆì •í™”
                setTimeout(()=> introModal.show(), 200);
            }

            // ì‹œì‘ ë²„íŠ¼: 'ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°' ì²´í¬ ì‹œ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            document.getElementById('intro-start')?.addEventListener('click', ()=>{
                const noShow = document.getElementById('intro-no-show')?.checked;
                if(noShow) localStorage.setItem(STORAGE_KEY, 'true');
                introModal.hide();
            });

            // ëª¨ë‹¬ì´ ë‹«í ë•Œ(ë‹¨ìˆœ ë‹«ê¸°)ì—ë„ ì²´í¬ë°•ìŠ¤ê°€ ì„ íƒë˜ì–´ ìˆìœ¼ë©´ ì €ì¥
            introModalEl.addEventListener('hidden.bs.modal', ()=>{
                const noShow = document.getElementById('intro-no-show')?.checked;
                if(noShow) localStorage.setItem(STORAGE_KEY, 'true');
            });
        })();
    </script>

    <!-- SPA ìŠ¤í¬ë¡¤ ë° íˆìŠ¤í† ë¦¬ ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        (function(){
            const openAlbumBtn = document.getElementById('open-album');
            const openMessageBtn = document.getElementById('open-message');
            const albumSection = document.getElementById('album-section');
            const carouselSection = document.getElementById('carousel-section');
            const messagePage = document.getElementById('message-page');
            const bgMusic = document.getElementById('bg-music');
            // ìƒë‹¨ì˜ CTA/ì„¹ì…˜(.message-section)ì„ ëª¨ì•„ ì œì–´
            const messageCTAs = Array.from(document.querySelectorAll('.message-section'));
            const heroSection = document.querySelector('.hero-section');
             const flipContainer = document.querySelector('.flip-container');

             function showHome(push = true){
                // í˜ì´ì§€ íƒ€ì´í‹€ ë³´ì´ê¸°
                heroSection?.classList.remove('d-none');
                // ìƒë‹¨ CTAë“¤ ë³´ì´ê²Œ
                 messageCTAs.forEach(el=>el.classList.remove('d-none'));

                 // ë§Œì•½ ì•¨ë²”ì´ ë³´ì´ëŠ” ìƒíƒœì—ì„œ ëŒì•„ê°€ëŠ” ê²½ìš°, ì±… ë„˜ê¹€ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰
                 if(flipContainer && albumSection && !albumSection.classList.contains('d-none')){
                     // ì¤€ë¹„: ìºëŸ¬ì…€ ë³´ì´ê²Œ í•˜ê³  íŒ¨ë„ í´ë˜ìŠ¤ ë¶€ì—¬
-                    carouselSection?.classList.remove('d-none');
+                    carouselSection?.classList.remove('d-none');
                     carouselSection?.classList.add('flip-panel','flip-in');
                     albumSection?.classList.add('flip-panel','flip-out');

                     const onEnd = ()=>{
                         albumSection.classList.add('d-none');
                         albumSection.classList.remove('flip-out','flip-panel');
                         carouselSection.classList.remove('flip-in','flip-panel');
                         albumSection.removeEventListener('animationend', onEnd);
                         window.scrollTo({top:0, behavior:'smooth'});
                     };
                     albumSection.addEventListener('animationend', onEnd);
                 } else {
                     // ì¼ë°˜ ë³µê·€: ì•¨ë²”ì€ ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ìœ¼ë¡œ ìœ ì§€
                     carouselSection?.classList.remove('d-none');
                     albumSection?.classList.add('d-none');
                     messagePage?.classList.add('d-none');
                     window.scrollTo({top:0, behavior:'smooth'});
                 }

                 if(push) history.pushState({page:'home'}, '', '#');
             }

             function showAlbum(push = true){
                 // ë©”ì‹œì§€ í˜ì´ì§€ ìˆ¨ê¹€ ë° ìƒë‹¨ CTA ìˆ¨ê¹€
                 messagePage?.classList.add('d-none');
                 messageCTAs.forEach(el=>el.classList.add('d-none'));
+                // í˜ì´ì§€ íƒ€ì´í‹€ ë³´ì´ê¸°
+                heroSection?.classList.remove('d-none');

                 // ì±… ë„˜ê¹€ ì• ë‹ˆë©”ì´ì…˜ì´ ê°€ëŠ¥í•œ ê²½ìš°: ìºëŸ¬ì…€ì—ì„œ ì•¨ë²”ìœ¼ë¡œ ë„˜ê¹€
                 if(flipContainer && carouselSection){
                     // ì¤€ë¹„: ì•¨ë²”ì„ ë¯¸ë¦¬ ë³´ì´ê²Œ í•˜ê³  ì• ë‹ˆë©”ì´ì…˜ ë¶€ì—¬
                     albumSection?.classList.remove('d-none');
                     carouselSection.classList.add('flip-panel','flip-out');
                     albumSection.classList.add('flip-panel','flip-in');

                     const onEnd = ()=>{
                         // ì• ë‹ˆë©”ì´ì…˜ ëë‚˜ë©´ ìºëŸ¬ì…€ ìˆ¨ê¸°ê³  í´ë˜ìŠ¤ ì •ë¦¬
                         carouselSection.classList.add('d-none');
                         carouselSection.classList.remove('flip-out','flip-panel');
                         albumSection.classList.remove('flip-in','flip-panel');
                         albumSection.scrollIntoView({behavior:'smooth', block:'start'});
                         carouselSection.removeEventListener('animationend', onEnd);
                     };
                     // animationendëŠ” ì•„ì›ƒ ì• ë‹ˆë©”ì´ì…˜ì„ ì‹¤í–‰í•œ ìª½ì—ì„œ ì¼ì–´ë‚˜ë¯€ë¡œ carouselSectionì— ë°”ì¸ë“œ
                     carouselSection.addEventListener('animationend', onEnd);
                 } else {
                     // ì• ë‹ˆë©”ì´ì…˜ ë¶ˆê°€ ì‹œ ì¼ë°˜ ë™ì‘
                     carouselSection?.classList.remove('d-none');
                     albumSection?.classList.remove('d-none');
                     albumSection?.scrollIntoView({behavior:'smooth', block:'start'});
                 }

                 if(push) history.pushState({page:'album'}, '', '#album');
             }

             function showMessage(push = true){
+                // í˜ì´ì§€ íƒ€ì´í‹€ ìˆ¨ê¸°ê¸°
+                heroSection?.classList.add('d-none');
+                // ë©”ì‹œì§€ ì „ìš© í˜ì´ì§€ë¥¼ ë³´ì´ê²Œ í•˜ê³  ë‹¤ë¥¸ ì„¹ì…˜ì€ ìˆ¨ê¹€
+                carouselSection?.classList.add('d-none');
+                albumSection?.classList.add('d-none');
+                messagePage?.classList.remove('d-none');
                 // ìƒë‹¨ CTAë“¤ ìˆ¨ê¹€
                 messageCTAs.forEach(el=>el.classList.add('d-none'));
                 messagePage?.scrollIntoView({behavior:'smooth', block:'start'});
                 if(push) history.pushState({page:'message'}, '', '#message');
             }

            openAlbumBtn?.addEventListener('click', ()=> showAlbum());
            openMessageBtn?.addEventListener('click', ()=> showMessage());
            document.getElementById('back-home')?.addEventListener('click', ()=> showHome());
            // ì•¨ë²” ì„¹ì…˜ í•˜ë‹¨ì˜ í™ˆ ë²„íŠ¼
            document.getElementById('back-home-album')?.addEventListener('click', ()=> showHome());

            // popstate ì²˜ë¦¬: í•´ì‹œì— ë”°ë¼ ìƒíƒœ ë³µêµ¬
            window.addEventListener('popstate', ()=>{
                const h = location.hash;
                if(h === '#album') showAlbum(false);
                else if(h === '#message') showMessage(false);
                else showHome(false);
            });

            // ì´ˆê¸° ë¡œë“œ ì‹œ í•´ì‹œê°€ ìˆìœ¼ë©´ í•´ë‹¹ ìœ„ì¹˜ë¡œ ì²˜ë¦¬
            if(location.hash === '#album') showAlbum(false);
            else if(location.hash === '#message') showMessage(false);

            // ê¸°ì¡´ BGM í† ê¸€(ê°„ë‹¨ ìœ ì§€)
            const musicBtn = document.getElementById('music-btn');
            // ë²„íŠ¼ í…ìŠ¤íŠ¸ ìƒíƒœ ë°˜ì˜
            function updateMusicBtn(){
                if(!musicBtn || !bgMusic) return;
                // ìŒì†Œê±° ë˜ëŠ” ì¬ìƒì¤‘ì´ ì•„ë‹ˆë©´ 'ì‘ê²Œ' ì•„ì´ì½˜
                if(bgMusic.muted || bgMusic.paused) musicBtn.textContent = 'BGM ğŸ”ˆ';
                else musicBtn.textContent = 'BGM ğŸ”Š';
            }

            // ì´ˆê¸° ìƒíƒœ ë°˜ì˜ (ì˜¤ë””ì˜¤ ë¡œë“œê°€ ëŠ¦ì„ ìˆ˜ ìˆì–´ ì•½ê°„ ì§€ì—°)
            setTimeout(updateMusicBtn, 150);

            musicBtn?.addEventListener('click', async ()=>{
                if(!bgMusic) return;
                if(bgMusic.muted){
                    // ìŒì†Œê±° í•´ì œ í›„ ì¬ìƒ ì‹œë„
                    bgMusic.muted = false;
                    try{
                        await bgMusic.play();
                    }catch(e){
                        // ì¬ìƒ ì‹¤íŒ¨ ì‹œ í˜„ì¬ ìœ„ì¹˜ ì´ˆê¸°í™” í›„ ì¬ì‹œë„
                        try{ bgMusic.currentTime = 0; await bgMusic.play(); }catch(e){}
                    }
                } else {
                    // ìŒì†Œê±° (ì¼ì‹œì •ì§€ ëŒ€ì‹  ìŒì†Œê±°)
                    bgMusic.muted = true;
                }
                updateMusicBtn();
            });
        })();
    </script>

    <script>
        (function(){
            // ê¸°ì¡´ SPA ë° BGM ë¡œì§ì€ ìœ„ì— ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.

            // --- ì¸ë„¤ì¼ ë™ì  ìƒì„± ---
            // ì—¬ê¸°ì— í‘œì‹œí•  ì´ë¯¸ì§€ íŒŒì¼ ê²½ë¡œë¥¼ ë°°ì—´ì— ì¶”ê°€í•˜ì„¸ìš”.
            const albumImages = [
                'images/sub1.jpg',
                'images/sub2.jpg',
                'images/sub3.jpg',
                'images/sub4.jpg',
                'images/sub5.jpg',
                'images/sub6.jpg',
                'images/sub7.jpg',
                'images/sub8.jpg',
                'images/sub9.jpg',
                'images/sub10.jpg',
                'images/sub11.jpg',
                'images/sub12.jpg',
                'images/sub13.jpg',
                'images/sub14.jpg',
                'images/sub15.jpg',
                'images/sub16.jpg',
                'images/sub17.jpg',
                'images/sub18.jpg',
                'images/sub19.jpg',
                'images/sub20.jpg',
                'images/sub21.jpg',
                'images/sub22.jpg',
                'images/sub23.jpg',
                'images/sub24.jpg',
                'images/sub25.jpg',
            ];

            const albumRow = document.getElementById('album-row');
            albumImages.forEach((src, idx) => {
                const col = document.createElement('div');
                col.className = 'col-6';
                col.innerHTML = `<img src="${src}" class="img-fluid rounded album-img album-thumb" data-index="${idx}" alt="">`;
                albumRow.appendChild(col);
            });

            // --- ì•¨ë²” ê°¤ëŸ¬ë¦¬ ì œì–´ ---
            const albumThumbs = Array.from(document.querySelectorAll('.album-thumb'));
            const albumThumbSrcs = albumThumbs.map(t => t.getAttribute('src'));
            const carouselCardImgs = Array.from(document.querySelectorAll('.card .card-img-top'));
            const carouselCardSrcs = carouselCardImgs.map(i => i.getAttribute('src'));
            const albumModalEl = document.getElementById('albumModal');
            const albumModalImg = document.getElementById('album-modal-img');
            const prevBtn = document.getElementById('album-prev');
            const nextBtn = document.getElementById('album-next');
            let currentIndex = 0;
            let bsAlbumModal = null;
            // activeList: í˜„ì¬ ëª¨ë‹¬ì—ì„œ ìˆœíšŒí•  ì´ë¯¸ì§€ src ë°°ì—´ (ê¸°ë³¸: ì•¨ë²” ì¸ë„¤ì¼)
            let activeList = albumThumbSrcs.slice();

            function openAlbumAt(index, list = activeList){
                if(!list || !list.length) return;
                activeList = list; // í˜„ì¬ í™œì„± ëª©ë¡ ì„¤ì •
                currentIndex = (index + list.length) % list.length;
                const src = list[currentIndex];
                albumModalImg.setAttribute('src', src);
                if(!bsAlbumModal) bsAlbumModal = new bootstrap.Modal(albumModalEl);
                bsAlbumModal.show();
            }

            function showNext(){ openAlbumAt(currentIndex + 1, activeList); }
            function showPrev(){ openAlbumAt(currentIndex - 1, activeList); }

            // ê¸°ì¡´ ì•¨ë²” ì¸ë„¤ì¼ í´ë¦­: ì•¨ë²” ëª©ë¡ìœ¼ë¡œ ì—°ë‹¤
            albumThumbs.forEach((thumb, idx) => {
                thumb.style.cursor = 'pointer';
                thumb.addEventListener('click', ()=>{
                    openAlbumAt(idx, albumThumbSrcs);
                });
            });

            // ìºëŸ¬ì…€ ì¹´ë“œ(.card-img-top) í´ë¦­ ì‹œ ìºëŸ¬ì…€ ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸ë§Œ ë³´ì—¬ì£¼ê¸°
            document.querySelectorAll('.card .card-img-top').forEach(imgEl => {
                imgEl.style.cursor = 'zoom-in';
                imgEl.addEventListener('click', (e) => {
                    const src = imgEl.getAttribute('src');
                    // ìºëŸ¬ì…€ ëª©ë¡ì—ì„œ ì¸ë±ìŠ¤ ì°¾ê¸°
                    const matchInCarousel = carouselCardSrcs.findIndex(s => s === src);
                    if(matchInCarousel >= 0){
                        openAlbumAt(matchInCarousel, carouselCardSrcs);
                        return;
                    }
                    // ì•„ë‹ˆë©´ ì•¨ë²” ì¸ë„¤ì¼ ëª©ë¡ì—ì„œ ì°¾ì•„ ì—´ê¸°
                    const matchIdx = albumThumbSrcs.findIndex(s => s === src);
                    if (matchIdx >= 0) {
                        openAlbumAt(matchIdx, albumThumbSrcs);
                    } else {
                        // ì¼ì¹˜í•˜ëŠ” í•­ëª©ì´ ì—†ìœ¼ë©´ í˜„ì¬ activeListë¡œ í‘œì‹œ (ê¸°ë³¸ ë™ì‘)
                        openAlbumAt(0, [src]);
                    }
                });
            });

            nextBtn?.addEventListener('click', showNext);
            prevBtn?.addEventListener('click', showPrev);

            // í‚¤ë³´ë“œ ì œì–´: ì™¼ìª½/ì˜¤ë¥¸ìª½/ESC
            document.addEventListener('keydown', (e)=>{
                if(!albumModalEl.classList.contains('show')) return;
                if(e.key === 'ArrowRight') showNext();
                else if(e.key === 'ArrowLeft') showPrev();
                else if(e.key === 'Escape') bsAlbumModal?.hide();
            });

        })();
    </script>

    <script>
        (function(){
            // --- í¸ì§€ ë°ì´í„°(ì˜ˆì‹œ) ---
            const letters = [
                {title: 'í•¨ê»˜í•œ ì‹œê°„ì—', body: `ê¸°ì‹œê°‘í˜€ì•• ìˆœì‚¬ë¥¼ ì•—ë‚ ê³„ìƒ¸ë¦¿ì–´ìš” ì‹²ë”ë””ë©°, ì•¡ë§ë‹¤ ìµëŠ”ìœ¼ë¡œ í›…ë‹ˆí‹°ë”ì—ì„œ ê°€ê¹Œì—¬ê°€ ë‚˜ì„¸í—ˆë¡œë¶€í„°. ìœ½ì••ë¯¸ì”ë¸ ì•ˆíŠ¹í‡¸ë¯¸ ë©ë‹Œê±°, ìœ¼ì¹¼ì˜ ì•„ë¼ì§€ ë­ë„¤í¼ì–´ ê¸°ë¼ëŠ”. ë”ê¹ì´ì–´ ì—´ì²´ì¡²ìŠ¤ë†”ì–€ì—°ì˜ í•˜ë´ìŠµë„ ì´ë“¸ë¬µìš°í”¼ì•˜ì€ ì†¡ì‘¬ë‹¤ í˜ìì„œë‹ˆìˆœì— ì„œê»¸ì…ë„. ì•„ì•„ë¥¼ ì§ë§ íƒ€ì¦£ë‹¨ì‹±ì€ ë…•ì˜¤ìˆ˜ìì•„, ìŒë” ê·¸ì˜ë§ì€ë°œí›ˆí•œí…Œ í–…ì€ì• ë¥¼. ë¯¸ë‹¥í•¬ì€ ì‘ìë²¼ì˜ ë¦´ë²¼ë ˆë¡œì´ë‹ˆê°€ì•„í†»ìœ¼ë¼ ë– ì• ë„ë…¸ë‹¤ ë¯¸ì—¬í¡í” ìœ¼ì˜ë„ì˜ ë¡ì•„ì™€ ë°”ë…• ì•„ì‹œë¡œ ë‹¤ë¦¬ë‹¼ë£¨ê°€ ì‰ë ¤ì•ˆëˆ„ìœ¼ë…¸ìš”. ìš´í‰í•­í˜¸ ê°ˆë§ˆêµ˜ì²´ìœ¼ì‹œëŠ” ì¦ˆì†¡ì‹¤ë¦¬ë¥¼ ìµì—”ê°€ì•„ë˜¥ê³¤ê°€ì•„ëŠ” ì–´ë‚´ì¿¨ë¯€ë¥¼ íë‹¤ê°€ ë½ëˆŒì•™ì–. ë„¶ëŸ¬ ì¦íƒ€ë ë‹¤ ë‹¤ì‹±ëŠ”ë‹¤ ë– ì•¨ëŸ°ëˆŒì–´í—ˆì™€ ì•ˆê¸ì€ ì¦ìˆ˜êµ°ë³´ë‹¤ ì´í™ì˜ ì…”ì˜¹ë‚˜ì˜¥ë‹¤. ì¸ ì˜¤ì§€ì˜ ìˆì†¨ë¯¸í•˜ì†Œ ê°ˆí¬ìŠ¤ì•„ì´ì–´ í•€ìŠ¨ì‹‘ì´ ìƒŒêµ°ì°¬í™ ìŠ¨ë°œê°í•˜ë‹¤. ì—¬ì•´ ì´ˆì…•ê´´ê°€ ì‰ì‹œì‹œë£¨ì–´ì•¼ í›„ëƒë°‹ì˜¤ë‹ˆ ì•„ì¹µì²´ìœ¼ë‚˜ ì›…ì‹ ë…¸ ìš´ìë¡œ í”„ê¸´ì€ì‹œì–´ ë«„ì¡±ì†œë°˜ê²…ì–´ì„œ ë†ë½€ìƒˆë‹¤, ì¡°ë°ë„¬ìˆ©ì—. ë¬˜ì‹œê±°ìˆœê±°ìƒ ì´ë†ë°í°ì˜ ê·¸ìŠ¤ëŠ” í•˜ê°•ì€ ë¹Œì˜¬ë‹¤. ìœ¼ëŒì—ì„œ ì•„ì§€ ì¸ë””ë‹¾í† ëˆ„ ë‹¤ê±°ë¡œë‹¤ ë¯”ë°ì¦ˆë„ˆ.`, author: 'ì¹œêµ¬ A'}
            ];

            // í¸ì§€ ëª©ë¡ ìƒì„±
            const lettersRow = document.getElementById('letters-row');
            letters.forEach((it, idx)=>{
                const col = document.createElement('div');
                col.className = 'col-12 col-md-6';
                col.innerHTML = `
                    <div class="envelope" data-index="${idx}">
                        <div class="cover" aria-hidden="true"><div class="click-hint" aria-hidden="true">í„°ì¹˜í•´ë´!</div></div>
                        <div class="envelope-content">
                            <div class="from">${it.author}</div>
                            <div class="title">${it.title}</div>
                            <div class="preview">${it.body.replace(/\n/g, ' ').slice(0,80)}${it.body.length>80? '...':''}</div>
                        </div>
                    </div>
                `;
                lettersRow.appendChild(col);
            });

            // ëª¨ë‹¬ ì œì–´
            const letterModalEl = document.getElementById('letterModal');
            const letterTitle = document.getElementById('letter-title');
            const letterMeta = document.getElementById('letter-meta');
            const letterBody = document.getElementById('letter-body');
            const prevBtn = document.getElementById('letter-prev');
            const nextBtn = document.getElementById('letter-next');
            let current = 0;
            let bsLetter = null;

            function openLetterAt(i){
                current = (i + letters.length) % letters.length;
                const it = letters[current];
                letterTitle.textContent = it.title;
                letterMeta.textContent = it.author;
                letterBody.textContent = it.body;
                if(!bsLetter) bsLetter = new bootstrap.Modal(letterModalEl);
                bsLetter.show();
            }

            // í´ë¦­í•˜ë©´ í¸ì§€ì§€ ì—´ë¦¬ëŠ” ì• ë‹ˆë©”ì´ì…˜ í›„ ëª¨ë‹¬ ì˜¤í”ˆ
            lettersRow.querySelectorAll('.envelope').forEach(el=>{
                el.style.cursor = 'pointer';
                el.addEventListener('click', ()=>{
                    if(el.classList.contains('opening')) return; // ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
                    el.classList.add('opening');

                    // ì• ë‹ˆë©”ì´ì…˜ ëë‚˜ë©´ ëª¨ë‹¬ ì˜¤í”ˆ
                    const done = ()=>{
                        el.removeEventListener('animationend', done);
                        // ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ ì œê±°í•˜ì—¬ ìƒíƒœ ë³µêµ¬
                        el.classList.remove('opening');
                        const idx = parseInt(el.dataset.index || '0', 10);
                        openLetterAt(idx);
                    };

                    // ì•ˆì „í•˜ê²Œ animationendë¥¼ ê¸°ë‹¤ë¦¬ê±°ë‚˜ 700ms í›„ì— ê°•ì œ ì‹¤í–‰
                    el.addEventListener('animationend', done);
                    setTimeout(()=>{
                        if(el.classList.contains('opening')){
                            // íƒ€ì„ì•„ì›ƒìœ¼ë¡œ ì²˜ë¦¬ (ë¸Œë¼ìš°ì €ê°€ animationendë¥¼ ë°œìƒì‹œí‚¤ì§€ ëª»í•  ê²½ìš°)
                            el.classList.remove('opening');
                            const idx = parseInt(el.dataset.index || '0', 10);
                            openLetterAt(idx);
                        }
                    }, 700);
                });
            });

            nextBtn?.addEventListener('click', ()=> openLetterAt(current+1));
            prevBtn?.addEventListener('click', ()=> openLetterAt(current-1));

            document.addEventListener('keydown', (e)=>{
                if(!letterModalEl.classList.contains('show')) return;
                if(e.key === 'ArrowRight') openLetterAt(current+1);
                else if(e.key === 'ArrowLeft') openLetterAt(current-1);
                else if(e.key === 'Escape') bsLetter?.hide();
            });

        })();
    </script>
</body>

</html>
